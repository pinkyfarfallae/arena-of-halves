@use '../../../../styles/variables' as *;

@keyframes pcard-enter {
  from {
    opacity: 0;
    transform: translateY(8px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes pcard-ult-shimmer {
  0% {
    background-position: -200% center;
  }

  100% {
    background-position: 200% center;
  }
}

@keyframes pcard-ult-glow {

  0%,
  100% {
    box-shadow:
      0 0 0 1px color-mix(in srgb, var(--ci-accent) 20%, transparent),
      0 2px 12px color-mix(in srgb, var(--ci-primary) 8%, transparent);
  }

  50% {
    box-shadow:
      0 0 0 1px color-mix(in srgb, var(--ci-accent) 35%, transparent),
      0 0 24px color-mix(in srgb, var(--ci-primary) 18%, transparent),
      0 0 48px color-mix(in srgb, var(--ci-accent) 8%, transparent);
  }
}

/* ── Card base ── */
.pcard {
  --pc-color: var(--ci-primary);
  display: flex;
  flex-shrink: 0;
  overflow: clip;
  border-radius: 14px;
  background:
    linear-gradient(160deg,
      color-mix(in srgb, var(--pc-color) 6%, var(--ci-bg-alt)),
      color-mix(in srgb, var(--pc-color) 2%, var(--ci-bg-alt)) 70%);
  border: 1px solid color-mix(in srgb, var(--pc-color) 12%, transparent);
  transition: transform 0.25s ease, box-shadow 0.3s ease;
  animation: pcard-enter 0.4s ease both;

  /* ── Passive modifier ── */
  &--passive {
    --pc-color: color-mix(in srgb, var(--ci-primary) 70%, var(--ci-accent-soft));
  }

  /* ── Skill modifier ── */
  &--skill {
    --pc-color: var(--ci-primary);
  }

  /* ── Ultimate modifier ── */
  &--ult {
    --pc-color: var(--ci-accent);
    border-color: color-mix(in srgb, var(--ci-accent) 25%, transparent);
    animation: pcard-enter 0.4s ease both, pcard-ult-glow 3s ease-in-out 0.5s infinite;

    background:
      linear-gradient(135deg,
        color-mix(in srgb, var(--ci-primary) 10%, var(--ci-bg-alt)),
        color-mix(in srgb, var(--ci-accent-soft) 12%, var(--ci-bg-alt)) 40%,
        color-mix(in srgb, var(--ci-primary) 6%, var(--ci-bg-alt)));
  }

  @media (max-width: $bp-medium) {
    border-radius: 12px;
  }

  @media (max-width: $bp-mobile) {
    border-radius: 10px;
  }
}

/* ── Left accent strip ── */
.pcard__accent {
  flex-shrink: 0;
  width: 4px;
  margin-right: 12px;
  background: linear-gradient(180deg,
      var(--pc-color),
      color-mix(in srgb, var(--pc-color) 40%, transparent));

  .pcard--ult & {
    width: 5px;
    background: linear-gradient(180deg,
        var(--ci-primary),
        var(--ci-accent),
        var(--ci-primary));
  }
}

/* ── Card body ── */
.pcard__body {
  flex: 1;
  padding: 0.65rem 0.8rem;
  min-width: 0;

  @media (max-width: $bp-medium) {
    padding: 0.5rem 0.7rem;
  }

  @media (max-width: $bp-compact) {
    padding: 0.45rem 0.6rem;
  }

  @media (max-width: $bp-mobile) {
    padding: 0.4rem 0.5rem;
  }
}

/* ── Icon orb ── */
.pcard__orb {
  flex-shrink: 0;
  align-self: center;
  width: 40px;
  height: 40px;
  flex-shrink: 0;
  margin: 0.65rem 0.8rem;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  background:
    linear-gradient(145deg,
      color-mix(in srgb, var(--pc-color) 14%, var(--ci-bg)),
      color-mix(in srgb, var(--pc-color) 4%, var(--ci-bg)) 50%,
      color-mix(in srgb, var(--pc-color) 10%, var(--ci-bg)));
  border: 1.5px solid color-mix(in srgb, var(--pc-color) 18%, transparent);
  box-shadow:
    inset 0 1px 0 color-mix(in srgb, var(--ci-light) 35%, transparent),
    inset 0 -1px 0 color-mix(in srgb, var(--pc-color) 6%, transparent),
    0 0 0 1px color-mix(in srgb, var(--pc-color) 4%, transparent),
    0 2px 8px color-mix(in srgb, var(--pc-color) 10%, transparent),
    0 0 16px color-mix(in srgb, var(--pc-color) 4%, transparent);
  transition: box-shadow 0.3s ease, transform 0.3s ease;

  /* Shine highlight */
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 50%;
    border-radius: 8.5px 8.5px 0 0;
    background: linear-gradient(180deg,
      color-mix(in srgb, var(--ci-light) 22%, transparent),
      transparent);
    pointer-events: none;
  }

  /* Outer ring glow */
  &::after {
    content: '';
    position: absolute;
    inset: -3px;
    border-radius: 13px;
    border: 1px solid color-mix(in srgb, var(--pc-color) 8%, transparent);
    pointer-events: none;
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
  }

  .pcard:hover & {
    box-shadow:
      inset 0 1px 0 color-mix(in srgb, var(--ci-light) 40%, transparent),
      inset 0 -1px 0 color-mix(in srgb, var(--pc-color) 8%, transparent),
      0 0 0 1px color-mix(in srgb, var(--pc-color) 12%, transparent),
      0 4px 14px color-mix(in srgb, var(--pc-color) 18%, transparent),
      0 0 24px color-mix(in srgb, var(--pc-color) 10%, transparent);

    &::after {
      border-color: color-mix(in srgb, var(--pc-color) 20%, transparent);
      box-shadow: 0 0 8px color-mix(in srgb, var(--pc-color) 12%, transparent);
    }
  }

  .pcard--ult & {
    background:
      linear-gradient(145deg,
        color-mix(in srgb, var(--ci-primary) 14%, var(--ci-bg)),
        color-mix(in srgb, var(--ci-accent) 6%, var(--ci-bg)) 50%,
        color-mix(in srgb, var(--ci-primary) 10%, var(--ci-bg)));
    border-color: color-mix(in srgb, var(--ci-accent) 25%, transparent);
    box-shadow:
      inset 0 1px 0 color-mix(in srgb, var(--ci-light) 35%, transparent),
      inset 0 -1px 0 color-mix(in srgb, var(--ci-accent) 6%, transparent),
      0 0 0 1px color-mix(in srgb, var(--ci-accent) 6%, transparent),
      0 2px 10px color-mix(in srgb, var(--ci-accent) 12%, transparent),
      0 0 20px color-mix(in srgb, var(--ci-accent) 6%, transparent);

    &::after {
      border-color: color-mix(in srgb, var(--ci-accent) 12%, transparent);
    }
  }

  @media (max-width: $bp-medium) {
    margin: 0.45rem 0.5rem;
    border-radius: 8px;

    &::before { border-radius: 6.5px 6.5px 0 0; }
    &::after { inset: -3px; border-radius: 11px; }
  }

  @media (max-width: $bp-compact) {
    margin: 0.4rem 0.45rem;
    width: 36px;
    height: 36px;
    border-radius: 7px;

    &::before { border-radius: 5.5px 5.5px 0 0; }
    &::after { inset: -2px; border-radius: 9px; }
  }

  @media (max-width: $bp-mobile) {
    margin: 0.35rem 0.4rem;
    width: 32px;
    height: 32px;
    border-radius: 6px;

    &::before { border-radius: 4.5px 4.5px 0 0; }
    &::after { inset: -2px; border-radius: 8px; }
  }
}

.pcard__orb-icon {
  font-size: 0.85rem;
  line-height: 1;
  color: var(--pc-color);
  position: relative;
  z-index: 1;
  filter: drop-shadow(0 0 3px color-mix(in srgb, var(--pc-color) 20%, transparent));
  transition: filter 0.3s ease;

  .pcard:hover & {
    filter: drop-shadow(0 0 6px color-mix(in srgb, var(--pc-color) 35%, transparent));
  }

  .pcard--ult & {
    background: linear-gradient(135deg, var(--ci-primary), var(--ci-accent));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    filter: drop-shadow(0 0 4px color-mix(in srgb, var(--ci-accent) 25%, transparent));
  }

  @media (max-width: $bp-compact) {
    font-size: 1rem;
  }

  @media (max-width: $bp-mobile) {
    font-size: 0.95rem;
  }
}

.pcard__tag {
  display: inline-block;
  font-family: 'Inter', sans-serif;
  font-size: 0.5rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.14em;
  color: var(--ci-tag-color, color-mix(in srgb, var(--pc-color) 80%, var(--ci-dark)));
  background: color-mix(in srgb, var(--ci-highlight) 30%, transparent);
  padding: 0.1rem 0.45rem;
  border-radius: 3px;
  margin-bottom: 0.15rem;

  .pcard--ult & {
    background:
      linear-gradient(90deg,
        color-mix(in srgb, var(--ci-primary) 14%, var(--ci-highlight)),
        color-mix(in srgb, var(--ci-accent-soft) 20%, var(--ci-highlight)));
    background-size: 200% 100%;
    animation: pcard-ult-shimmer 4s ease-in-out infinite;
  }

  @media (max-width: $bp-compact) {
    font-size: 0.45rem;
  }

  @media (max-width: $bp-mobile) {
    font-size: 0.4rem;
    letter-spacing: 0.1em;
  }
}

.pcard__name {
  font-size: 0.9rem;
  font-weight: 700;
  color: var(--ci-fg);
  margin: 0;
  line-height: 1.25;

  @media (max-width: $bp-medium) {
    font-size: 0.82rem;
  }

  @media (max-width: $bp-compact) {
    font-size: 0.78rem;
  }

  @media (max-width: $bp-mobile) {
    font-size: 0.72rem;
  }
}

.pcard__desc {
  display: flex;
  flex-direction: column;
  gap: 0.2rem;
  font-family: 'Noto Sans Thai', 'Inter', sans-serif;
  font-size: 0.75rem;
  line-height: 1.65;
  color: color-mix(in srgb, var(--ci-fg) 70%, transparent);
  margin: 0.25rem 0 0;

  .pcard--ult & {
    color: color-mix(in srgb, var(--ci-fg) 80%, transparent);
  }

  @media (max-width: $bp-medium) {
    font-size: 0.7rem;
    line-height: 1.55;
  }

  @media (max-width: $bp-compact) {
    font-size: 0.65rem;
    line-height: 1.5;
  }

  @media (max-width: $bp-mobile) {
    font-size: 0.6rem;
    line-height: 1.45;
  }
}

.pcard__line {
  display: block;
}

.pcard__bullet {
  padding-left: 0.8rem;
  position: relative;

  &::before {
    content: '•';
    position: absolute;
    left: 0;
    color: var(--pc-color);
  }
}

.pcard__desc-label {
  font-weight: 600;
  color: color-mix(in srgb, var(--ci-fg) 85%, transparent);
  margin-right: 0.2rem;

  &::after {
    content: ':';
    margin-right: 0.25rem;
  }

  .pcard--ult & {
    color: color-mix(in srgb, var(--ci-fg) 92%, transparent);
  }
}
